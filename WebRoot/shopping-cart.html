<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>shopping-cart</title>
    <link href="images/title.ico" rel="shortcut icon" type="image/x-icon">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/my.css">
    <!--<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">-->
</head>
<body class="container" ng-app="myapp">
<header>
    <nav class="navbar navbar-inverse" role="navigation" style="background: #ffe9e2">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#my-navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="javascript:void(0)">zhouyang</a>
            </div>
            <div class="collapse navbar-collapse" id="my-navbar">
                <ul class="nav navbar-nav">
                    <li><a href="#" >首页</a></li>
                    <li><a href="#" >美食天地</a></li>
                    <li><a href="#" >今日优惠</a></li>
                    <li><a href="shopping-cart.html" >购物车</a></li>
                    <li><a href="#" >关于我们</a></li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<div class="content">
    <div class="row">
        <div class="col-md-3  content-left">
            <p><code class="lead">周杨</code>，你好！<br/><br/>欢迎进入订餐系统</p>
            <hr/>
            <div class="login-info">
                <ul>
                    <li><a href="shopping-cart.html">购物车 <span class="badge">3</span></a></li>
                    <li><a href="my-order.html">我的订单</a></li>
                </ul>
                <ul>
                    <li><a href="#">我的首页</a></li>
                    <li><a href="#">我的收藏</a></li>
                </ul>
                <ul>
                    <li><a href="#">注册信息管理</a></li>
                    <li><a href="address.html">常用送货地址</a></li>
                </ul>
                <a href="index.html" class="btn btn-info btn-login">退出登录</a>
            </div>
            <div class="well system-info">
                <dl>
                    <dt>系统信息</dt>
                    <dd>当前注册人数：<code>15</code>人</dd>
                </dl>
                <dl>
                    <dt>最新注册</dt>
                    <dd>2016-3-12 12:09:12 <code>kevin</code></dd>
                    <dd>2016-3-12 12:09:12 <code>kevin</code></dd>
                </dl>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">折扣信息</h3>
                </div>
                <div class="panel-body">
                    <p>满<code>50</code>元，<code>95</code>折</p>
                    <p>满<code>100</code>元，<code>90</code>折</p>
                    <p>满<code>200</code>元，<code>85</code>折</p>
                    <p>满<code>300</code>元，<code>90</code>折</p>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">订餐流程</h3>
                </div>
                <div class="panel-body">
                    <ol>
                        <li>选择菜品 &nbsp;<span class="glyphicon glyphicon-arrow-right"></span> 加入购物车</li>
                        <li>查看购物车 &nbsp;<span class="glyphicon glyphicon-arrow-right"></span> 下单</li>
                        <li>确认订单 &nbsp;<span class="glyphicon glyphicon-arrow-right"></span> 完成</li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-md-8 " >
            <div class="page-header">
                <form role="form" class="form-inline">
                    <div class="form-group ">
                        菜品名称:
                        <input type="text" class="form-control search-food" id="foodname">
                    </div>
                    <div class="form-group">
                        价格:
                        <input type="text" class="form-control  search-price" > --
                        <input type="text" class="form-control search-price" >
                    </div>
                    <div class="checkbox">
                        类型：
                        <label class="checkbox-inline">
                            <input type="checkbox" id="inlineCheckbox1" value="option1"> 冷菜
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" id="inlineCheckbox2" value="option2"> 主菜
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" id="inlineCheckbox3" value="option3"> 靓汤
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" id="inlineCheckbox4" value="option4"> 主食
                        </label>
                    </div>
                    <button class="btn-warning btn" type="submit">search</button>
                </form>
            </div>
            <div class="main" ng-controller="cartCtrl">
                <div>
                    <lead class="h4">购物车</lead>
                    <a href="index-login.html" class="pull-right">返回用户首页</a>
                </div>
                <div ng-view></div>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="text-center footer-info">
        <h3>上海立信会计金融学院+信息管理与信息系统+周杨</h3>
    </div>
</footer>
<script src="js/jquery-3.1.0.min.js"></script>
<script type="text/javascript" src="js/angular.js"></script>
<script src="js/angular-route.js"></script>
<script src="js/bootstrap.min.js"></script>
<script>
    angular.module('myapp',['ngRoute'])
            .config(function($routeProvider){
                $routeProvider
                        .when('/',{
                            template:"\
                                    <table class='table table-bordered text-center address-table' style='margin-top:40px;'>\
                                                <thead>\
                                                <tr >\
                                                <th>品名</th>\
                                                <th>单价 （元）</th>\
                                    <th>数量 （份）</th>\
                                    <th>金额</th>\
                                    <th>操作</th>\
                                    </tr>\
                                    </thead>\
                                    <tbody >\
                                        <tr class='main-cart' ng-repeat='food in foods' ng-controller='eachCtrl' >\
                                         <td class='text-left' style='padding-left:30px;'>\
                                            <img ng-src='{{food.img}}' alt='美食' title='美食' class='img img-thumbnail'>&nbsp;&nbsp;&nbsp;{{food.name}}\
                                            </td>\
                                            <td ng-bind='food.price'></td>\
                                            <td ><button class='btn btn-warning'>{{food.num}}</button></td>\
                                            <td ng-bind='food.num*food.price'></td>\
                                            <td>\
                                        <a href='javascript:;' ng-click='oadd()' class='btn btn-default'>+</a>\
                                        <a href='javascript:;' ng-click='oreduce()' class='btn btn-default'>-</a>\
                                        <a href='javascript:;' class='btn btn-default' ng-click='remove($index)'>删除</a>\
                                        </td>\
                                        </tr>\
                                    <tr class='main-cart'>\
                                        <td colspan='3' style='font-size:20px;color:red;'>合计</td>\
                                        <td >{{all() |currency:'￥'}}</td>\
                                        <td></td>\
                                    </tr>\
                                    <tr class='main-cart'>\
                                        <td>适用折扣</td>\
                                        <td>{{discount}}折</td>\
                                        <td>折后金额</td>\
                                        <td>{{all()*discount/100 |currency:'￥'}}</td>\
                                        <td>\
                                            <a href='#' class='btn btn-default'>立即下单</a>\
                                        </td>\
                                    </tr>\
                                    </tbody>\
                                     </table>"
                        })
            })
            .controller('cartCtrl',function($scope){
                $scope.foods=[
                    {img:'images/rice.jpg',name:'水果蛋炒饭',price:16.50,num:1},
                    {img:'images/chicken.jpg',name:'辣子鸡丁',price:32.00,num:1},
                    {img:'images/fish.jpg',name:'西湖醋鱼',price:48.50,num:1},
                    {img:'images/duck.jpg',name:'广式烧填鸭',price:42.00,num:1},
                    {img:'images/meat.jpg',name:'东坡肉',price:38.50,num:1}
                ];
                $scope.all=function(){
                    var total=0;
                    for(var i=0;i<$scope.foods.length;i++){
                        total+=($scope.foods[i].num*$scope.foods[i].price)
                    }
                    return total
                };

                $scope.discount=95;
                $scope.remove = function(index) {
                    var con=confirm('你真的想好了吗？');
                    if(con){
                        $scope.foods.splice(index, 1);
                    }
                }
            })
            .controller('eachCtrl',function($scope){
                $scope.oadd=function() {
                    $scope.foods[$scope.$index].num +=1;
                    $scope.all+=$scope.foods[$scope.$index].price;
                };
                $scope.oreduce=function() {
                    if($scope.foods[$scope.$index].num==1){
                        $scope.foods[$scope.$index].num=1
                    }else{
                        $scope.foods[$scope.$index].num -=1;
                        $scope.all-=$scope.foods[$scope.$index].price;
                    }

                };
            })


</script>
</body>
</html>